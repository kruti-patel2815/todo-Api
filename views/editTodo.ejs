<!DOCTYPE html>
<html>

<head>
    <title>Edit Todo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h1>Edit Todo</h1>

        <form action="/todos/edit/<%= todo._id %>" method="POST">


            <div class="mb-3">
                <label>Title *</label>
                <input type="text" name="title" class="form-control" value="<%= todo.title %>" required>
            </div>


            <div class="mb-3">
                <label>Description</label>
                <textarea name="description" class="form-control" rows="3"><%= todo.description %></textarea>
            </div>


            <div class="mb-3">
                <label>Priority</label>
                <select name="priority" class="form-control">
                    <option value="low" <%=todo.priority==='low' ? 'selected' : '' %>>Low</option>
                    <option value="medium" <%=todo.priority==='medium' ? 'selected' : '' %>>Medium</option>
                    <option value="high" <%=todo.priority==='high' ? 'selected' : '' %>>High</option>
                </select>
            </div>


            <div class="mb-3">
                <label>Status</label>
                <select name="status" class="form-control">
                    <option value="pending" <%=todo.status==='pending' ? 'selected' : '' %>>Pending</option>
                    <option value="in-progress" <%=todo.status==='in-progress' ? 'selected' : '' %>>In Progress</option>
                    <option value="completed" <%=todo.status==='completed' ? 'selected' : '' %>>Completed</option>
                </select>
            </div>


            <div class="mb-3">
                <label>Category</label>
                <select name="category" class="form-control">
                    <option value="general" <%=todo.category==='general' ? 'selected' : '' %>>General</option>
                    <option value="work" <%=todo.category==='work' ? 'selected' : '' %>>Work</option>
                    <option value="personal" <%=todo.category==='personal' ? 'selected' : '' %>>Personal</option>
                    <option value="study" <%=todo.category==='study' ? 'selected' : '' %>>Study</option>
                </select>
            </div>


            <div class="mb-3">
                <label for="dueDateDisplay" class="form-label">
                    Due Date <small class="text-muted">(DD/MM/YYYY format)</small>
                </label>
                <input type="text" id="dueDateDisplay" class="form-control" placeholder="29/01/2026">

                
                <input type="hidden" id="dueDate" name="dueDate"
                    value="<%= todo.dueDate ? todo.dueDate.toISOString().split('T')[0] : '' %>">
            </div>



            <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-warning">Update</button>
                <a href="/home" class="btn btn-secondary">Cancel</a>
            </div>

        </form>
    </div>
</body>

</html>